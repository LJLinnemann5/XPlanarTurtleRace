"use strict";var TcHmi,__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};!function(TcHmi){!function(Controls){!function(BaseTemplate){var _a,_TcHmiBreadcrumb_tchmiFQN;class TcHmiBreadcrumb extends TcHmi.Controls.System.TcHmiControl{constructor(element,pcElement,attrs){super(element,pcElement,attrs),Object.defineProperty(this,"__elementTemplateRoot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__breadcrumbData",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"__buttonPressed",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"__callback",{enumerable:!0,configurable:!0,writable:!0,value:function(content){}}),Object.defineProperty(this,"__textColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__textFontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__textFontSizeUnit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__onBreadcrumbButtonDown",{enumerable:!0,configurable:!0,writable:!0,value:e=>{const element=this.__breadcrumbData.find((item=>item.button===e.target));element?.isEnabled&&element.button&&(element.button.classList.add("down"),element.button.addEventListener("pointerleave",this.__onBreadcrumbButtonLeave),element.button.addEventListener("pointerenter",this.__onBreadcrumbButtonEnter),element.button.addEventListener("pointerup",this.__onBreadcrumbButtonUp,{once:!0}),this.__buttonPressed=element,document.addEventListener("pointerup",(()=>{this.__buttonPressed?.button&&(this.__buttonPressed.button.classList.remove("down"),this.__buttonPressed.button.removeEventListener("pointerleave",this.__onBreadcrumbButtonLeave),this.__buttonPressed.button.removeEventListener("pointerenter",this.__onBreadcrumbButtonEnter),this.__buttonPressed.button.removeEventListener("pointerup",this.__onBreadcrumbButtonUp),this.__buttonPressed=null)}),{once:!0}))}}),Object.defineProperty(this,"__onBreadcrumbButtonUp",{enumerable:!0,configurable:!0,writable:!0,value:e=>{const element=this.__breadcrumbData.find((item=>item.button===e.target));element?.isEnabled&&element?.button&&element===this.__buttonPressed&&(element.button.classList.remove("down"),element.button.removeEventListener("pointerleave",this.__onBreadcrumbButtonLeave),element.button.removeEventListener("pointerenter",this.__onBreadcrumbButtonEnter),element.button.removeEventListener("pointerup",this.__onBreadcrumbButtonUp),this.__callback&&this.__callback(element.code),this.__buttonPressed=null)}}),Object.defineProperty(this,"__onBreadcrumbButtonLeave",{enumerable:!0,configurable:!0,writable:!0,value:e=>{if(!this.__buttonPressed)return;const element=this.__breadcrumbData.find((item=>item.button===e.target));element?.button&&element===this.__buttonPressed&&element.button.classList.remove("down")}}),Object.defineProperty(this,"__onBreadcrumbButtonEnter",{enumerable:!0,configurable:!0,writable:!0,value:e=>{if(!this.__buttonPressed)return;const element=this.__breadcrumbData.find((item=>item.button===e.target));element?.button&&element===this.__buttonPressed&&element.button.classList.add("down")}}),Object.defineProperty(this,"__onResolverForTextColorWatchCallback",{enumerable:!0,configurable:!0,writable:!0,value:data=>{!1===this.__isAttached&&this.__suspendObjectResolver("textColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__textColor)||(this.__textColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextColor"}),this.__processTextColor()):TcHmi.Log.errorEx("[Source=Control, Module="+this.__type+(__classPrivateFieldGet(_a,_a,"f",_TcHmiBreadcrumb_tchmiFQN)!==this.__type?", Origin="+__classPrivateFieldGet(_a,_a,"f",_TcHmiBreadcrumb_tchmiFQN):"")+", Id="+this.getId()+", Attribute=TextColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))}}),this.__asyncWorkData["Controls.BaseTemplate.TcHmiBreadcrumb.triggerRebuild"]=!1}__previnit(){if(this.__elementTemplateRoot=this.__element[0].getElementsByClassName("TcHmi_Controls_BaseTemplate_TcHmiBreadcrumb-Template")[0],!this.__elementTemplateRoot)throw new Error("Invalid Template.html");super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.__breadcrumbData&&(this.__asyncWorkData["Controls.BaseTemplate.TcHmiBreadcrumb.triggerRebuild"]=!0,this.__requestAsyncWork())}__detach(){super.__detach()}destroy(){this.__keepAlive||(this.__resetTcHmiBreadcrumb(),super.destroy())}__doAsyncWork(timestamp){super.__doAsyncWork(timestamp),!this.__isDestroyed&&this.__isAttached&&this.__asyncWorkData["Controls.BaseTemplate.TcHmiBreadcrumb.triggerRebuild"]&&(this.__asyncWorkData["Controls.BaseTemplate.TcHmiBreadcrumb.triggerRebuild"]=!1,this.__createBreadcrumb())}setBreadcrumbData(valueNew,callback){let breadcrumbData=valueNew.map((item=>({text:item.name,code:item.content,isEnabled:!0})));this.setBreadcrumbDataEx(breadcrumbData,callback)}setBreadcrumbDataEx(valueNew,callback){this.__resetTcHmiBreadcrumb(),this.__breadcrumbData=valueNew,this.__callback=callback,this.__asyncWorkData["Controls.BaseTemplate.TcHmiBreadcrumb.triggerRebuild"]=!0,this.__requestAsyncWork()}__createBreadcrumb(){if(!this.__isAttached)return;let width=0;for(let e of this.__breadcrumbData)this.__createTcHmiBreadcrumbButton(e,!1),e.button&&(width+=e.button.getBoundingClientRect().width);width>this.__element[0].clientWidth&&(this.__resetTcHmiBreadcrumb(),this.__createTcHmiBreadcrumbButton(this.__breadcrumbData[this.__breadcrumbData.length-2],!0))}__createTcHmiBreadcrumbButton(element,backwards){element.button&&(element.button.remove(),element.button=void 0),element.button=document.createElement("div"),element.button.classList.add("TcHmi_Controls_BaseTemplate_TcHmiBreadcrumb-button"),element.button.classList.toggle("TcHmi_Controls_BaseTemplate_TcHmiBreadcrumb-button-disabled",!element.isEnabled);const span=document.createElement("span");span.textContent=element.text,element.button.appendChild(span),this.__elementTemplateRoot.append(element.button);let addEvents=!1;element===this.__breadcrumbData[this.__breadcrumbData.length-1]||backwards?backwards?(element.button.classList.add("arrow-backwards"),addEvents=!0):element.button.classList.add("active"):(element.button.classList.add("arrow"),addEvents=!0),addEvents&&element.button.addEventListener("pointerdown",this.__onBreadcrumbButtonDown)}__resetTcHmiBreadcrumb(){this.__elementTemplateRoot.textContent="";for(const element of this.__breadcrumbData)element.button&&(element.button.removeEventListener("pointerdown",this.__onBreadcrumbButtonDown),element.button.removeEventListener("pointerup",this.__onBreadcrumbButtonUp),element.button.removeEventListener("pointerleave",this.__onBreadcrumbButtonLeave),element.button.removeEventListener("pointerenter",this.__onBreadcrumbButtonEnter))}setTextFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSize")),convertedValue!==this.__textFontSize&&(this.__textFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSize"}),this.__processTextFontSize())}getTextFontSize(){return this.__textFontSize}__processTextFontSize(){TcHmi.StyleProvider.processFontSize(this.__element,this.__textFontSize,this.__textFontSizeUnit)}setTextFontSizeUnit(valueNew){let convertedValue=TcHmi.ValueConverter.toFontSizeUnit(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSizeUnit")),convertedValue!==this.__textFontSizeUnit&&(this.__textFontSizeUnit=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSizeUnit"}),this.__processTextFontSizeUnit())}getTextFontSizeUnit(){return this.__textFontSizeUnit}__processTextFontSizeUnit(){TcHmi.StyleProvider.processFontSize(this.__element,this.__textFontSize,this.__textFontSizeUnit)}setTextColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextColor"));let resolverInfo=this.__objectResolvers.get("textColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,this);this.__objectResolvers.set("textColor",{resolver:resolver,watchCallback:this.__onResolverForTextColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForTextColorWatchCallback)})}getTextColor(){return this.__textColor}__processTextColor(){TcHmi.StyleProvider.processTextColor(this.__element,this.__textColor)}}_TcHmiBreadcrumb_tchmiFQN={value:"TcHmi.Controls.BaseTemplate."+(_a=TcHmiBreadcrumb).name},BaseTemplate.TcHmiBreadcrumb=TcHmiBreadcrumb}(Controls.BaseTemplate||(Controls.BaseTemplate={}))}(TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiBreadcrumb","TcHmi.Controls.BaseTemplate",TcHmi.Controls.BaseTemplate.TcHmiBreadcrumb);